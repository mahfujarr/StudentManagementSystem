{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0"
    />
    <title>Preskool - Dashboard</title>
    <link rel="shortcut icon" href="{%static 'assets/img/favicon.png' %}" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,500;0,600;0,700;1,400&amp;display=swap"
    />
    <link
      rel="stylesheet"
      href="{%static 'assets/plugins/bootstrap/css/bootstrap.min.css' %}"
    />
    <link
      rel="stylesheet"
      href="{%static 'assets/plugins/fontawesome/css/fontawesome.min.css' %}"
    />
    <link
      rel="stylesheet"
      href="{%static 'assets/plugins/fontawesome/css/all.min.css' %}"
    />
    <link rel="stylesheet" href="{%static 'assets/css/style.css' %}" />
  </head>
  <body>
    <div class="main-wrapper">
      <div class="header">
        <div class="header-left">
          <a href="{% url 'home' %}" class="logo">
            <img src="{%static 'assets/img/logo.png' %}" alt="Logo" />
          </a>
          <a href="{% url 'home' %}" class="logo logo-small">
            <img
              src="{%static 'assets/img/logo-small.png' %}"
              alt="Logo"
              width="30"
              height="30"
            />
          </a>
        </div>
        <a href="javascript:void(0);" id="toggle_btn">
          <i class="fas fa-align-left"></i>
        </a>
        <div class="top-nav-search mt-3">
          <h4><strong>Welcome,</strong> {{ user.username }}</h4>
        </div>
        <a class="mobile_btn" id="mobile_btn">
          <i class="fas fa-bars"></i>
        </a>
        <ul class="nav user-menu">
          <!-- <li class="nav-item dropdown noti-dropdown">
                  <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                  <i class="far fa-bell"></i> 
                  {% if unread_notification_count > 0 %}
                  <span class="badge badge-pill">{{unread_notification_count}}</span>
                  {% endif %}
                  </a>
                  <div class="dropdown-menu notifications">
                     <div class="topnav-dropdown-header">
                        <span class="notification-title">Notifications</span>
                        <a href="javascript:void(0)" class="clear-noti"> Clear All </a>
                     </div>
                     <div class="noti-content">
                        <ul class="notification-list">
                           {% for notification in unread_notification %}
                           <li class="notification-message">
                              <a href="#">
                                 <div class="media">
                                    <span class="avatar avatar-sm">
                                    <img class="avatar-img rounded-circle" alt="User Image" src="{%static 'assets/img/profiles/avatar-02.jpg'%}">
                                    </span>
                                    <div class="media-body">
                                       <p class="noti-details"><span class="noti-title">{{ notification.user.username }}</span> {{ notification.message }} <span class="noti-title">your estimate</span></p>
                                       <p class="noti-time"><span class="notification-time">{{ notification.created_at|timesince }} ago</span></p>
                                    </div>
                                 </div>
                              </a>
                           </li>
                           {% endfor %}

                        </ul>
                     </div>
                     <div class="topnav-dropdown-footer">
                        <a href="#">View all Notifications</a>
                     </div>
                  </div>
               </li> -->
          <li class="nav-item dropdown has-arrow">
            <a
              href="#"
              class="dropdown-toggle nav-link"
              data-toggle="dropdown"
              aria-expanded="false"
            >
              <span class="user-img"
                ><img
                  class="rounded-circle"
                  src="{%static 'assets/img/profiles/avatar-01.jpg' %}"
                  width="31"
                  alt="Ryan Taylor"
              /></span>
            </a>
            <div class="dropdown-menu dropdown-menu-right">
              <div class="user-header">
                <div class="avatar avatar-sm">
                  <img
                    src="{%static 'assets/img/profiles/avatar-01.jpg' %}"
                    alt="User Image"
                    class="avatar-img rounded-circle"
                  />
                </div>
                <div class="user-text">
                  <h6>{{ user.username }}</h6>
                  <p class="text-muted mb-0">Administrator</p>
                </div>
              </div>
              <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
            </div>
          </li>
        </ul>
      </div>
      <div class="sidebar" id="sidebar">
        <div class="sidebar-inner slimscroll">
          <div id="sidebar-menu" class="sidebar-menu">
            <ul>
              <li class="menu-title">
                <span>Main Menu</span>
              </li>
              <li
                class="{% if request.resolver_match.url_name == 'home' %}active{% endif %}"
              >
                <a href="{% url 'home' %}"
                  ><i class="fas fa-tachometer-alt"></i>
                  <span>Dashboard</span></a
                >
              </li>
              <li
                class="{% if request.resolver_match.url_name == 'student-list' %}active{% endif %}"
              >
                <a href="{% url 'student-list' %}"
                  ><i class="fas fa-user-graduate"></i> <span>Students</span></a
                >
              </li>
              <li
                class="{% if request.resolver_match.url_name == 'student-add' %}active{% endif %}"
              >
                <a href="{% url 'student-add' %}"
                  ><i class="fas fa-plus"></i> <span>Add Student</span></a
                >
              </li>
              <li class="menu-title">
                <span>Management</span>
              </li>
              <li
                class="{% if request.resolver_match.url_name == 'fees-collections' %}active{% endif %}"
              >
                <a href="{% url 'fees-collections' %}"
                  ><i class="fas fa-money-bill-wave"></i>
                  <span>Fees Collection</span></a
                >
              </li>
              <li
                class="{% if request.resolver_match.url_name == 'add-fees-collection' %}active{% endif %}"
              >
                <a href="{% url 'add-fees-collection' %}"
                  ><i class="fas fa-dollar-sign"></i> <span>Add Fees</span></a
                >
              </li>
              <li
                class="{% if request.resolver_match.url_name == 'view-fees' %}active{% endif %}"
              >
                <a href="{% url 'view-fees' %}"
                  ><i class="fas fa-comment-dollar"></i> <span>Fees</span></a
                >
              </li>
              <li>
                <a href="event.html"
                  ><i class="fas fa-calendar-day"></i> <span>Events</span></a
                >
              </li>
              <li>
                <a href="time-table.html"
                  ><i class="fas fa-table"></i> <span>Time Table</span></a
                >
              </li>
              {% if user.is_superuser %}
              <li
                class="{% if request.resolver_match.url_name == 'register-new-admin' %}active{% endif %}"
              >
                <a href="{% url 'register-new-admin' %}"
                  ><i class="fas fa-user-plus"></i>
                  <span>Register New admin</span></a
                >
              </li>
              {% endif %}
            </ul>
          </div>
        </div>
      </div>

      {% block body %} {% endblock %}
    </div>

    <script src="{%static 'assets/js/jquery-3.6.0.min.js' %}"></script>
    <script src="{%static 'assets/js/popper.min.js' %}"></script>
    <script src="{%static 'assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{%static 'assets/plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>
    <script src="{%static 'assets/js/script.js' %}"></script>
    <script>
      $(document).ready(function () {
        // Initialize all dropdowns
        $(".dropdown-toggle").dropdown()

        // Initialize slimscroll
        if ($("#sidebar-menu").length > 0) {
          $("#sidebar-menu").slimScroll({
            height: "auto",
            width: "100%",
            position: "right",
            size: "7px",
            color: "#ccc",
            wheelStep: 10,
            touchScrollStep: 100,
          })
        }

        // Toggle sidebar
        $("#toggle_btn").on("click", function (e) {
          e.preventDefault()
          if ($("body").hasClass("mini-sidebar")) {
            $("body").removeClass("mini-sidebar")
            $(".subdrop + ul").slideDown()
          } else {
            $("body").addClass("mini-sidebar")
            $(".subdrop + ul").slideUp()
          }
          return false
        })

        // Mobile menu toggle
        $("#mobile_btn").on("click", function (e) {
          e.preventDefault()
          $("body").toggleClass("sidebar-open")
          return false
        })
      })
    </script>
  </body>
</html>
